{"version":3,"sources":["assets\\scripts\\animator\\core\\AnimatorCondition.ts"],"names":[],"mappings":";;;;;;;AAEA,WAAW;AACX,IAAY,SAMX;AAND,WAAY,SAAS;IACjB,iDAAY,CAAA;IACZ,+CAAW,CAAA;IACX,6CAAU,CAAA;IACV,+CAAW,CAAA;IACX,yDAAgB,CAAA;AACpB,CAAC,EANW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAMpB;AAED,WAAW;AACX,IAAY,SAOX;AAPD,WAAY,SAAS;IACjB,2CAAS,CAAA;IACT,iDAAY,CAAA;IACZ,+CAAW,CAAA;IACX,yCAAQ,CAAA;IACR,2DAAiB,CAAA;IACjB,qDAAc,CAAA;AAClB,CAAC,EAPW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAOpB;AAED;;GAEG;AACH;IASI,2BAAY,IAAS,EAAE,EAAsB;QARrC,QAAG,GAAuB,IAAI,CAAC;QACvC,gBAAgB;QACR,WAAM,GAAW,EAAE,CAAC;QAC5B,cAAc;QACN,WAAM,GAAW,CAAC,CAAC;QAC3B,iBAAiB;QACT,WAAM,GAAc,SAAS,CAAC,KAAK,CAAC;QAGxC,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;QACd,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;IAC7B,CAAC;IAEM,wCAAY,GAAnB;QACI,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAEM,wCAAY,GAAnB;QACI,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACrD,CAAC;IAED,gBAAgB;IACT,iCAAK,GAAZ;QACI,IAAI,IAAI,GAAc,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1C,IAAI,IAAI,KAAK,SAAS,CAAC,OAAO,EAAE;YAC5B,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,MAAM,CAAC;SAC/D;aAAM,IAAI,IAAI,KAAK,SAAS,CAAC,MAAM,EAAE;YAClC,IAAI,KAAK,GAAW,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC3D,QAAQ,IAAI,CAAC,MAAM,EAAE;gBACjB,KAAK,SAAS,CAAC,KAAK;oBAChB,OAAO,KAAK,KAAK,IAAI,CAAC,MAAM,CAAC;gBACjC,KAAK,SAAS,CAAC,QAAQ;oBACnB,OAAO,KAAK,KAAK,IAAI,CAAC,MAAM,CAAC;gBACjC,KAAK,SAAS,CAAC,OAAO;oBAClB,OAAO,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC/B,KAAK,SAAS,CAAC,IAAI;oBACf,OAAO,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC/B,KAAK,SAAS,CAAC,aAAa;oBACxB,OAAO,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC;gBAChC,KAAK,SAAS,CAAC,UAAU;oBACrB,OAAO,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC;gBAChC;oBACI,OAAO,KAAK,CAAC;aACpB;SACJ;aAAM,IAAI,IAAI,KAAK,SAAS,CAAC,YAAY,EAAE;YACxC,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAC5D;aAAM,IAAI,IAAI,KAAK,SAAS,CAAC,OAAO,EAAE;YACnC,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SACxD;aAAM;YACH,EAAE,CAAC,KAAK,CAAC,uDAAsC,IAAM,CAAC,CAAC;YACvD,OAAO,KAAK,CAAC;SAChB;IACL,CAAC;IACL,wBAAC;AAAD,CAxDA,AAwDC,IAAA","file":"","sourceRoot":"/","sourcesContent":["import AnimatorController from \"./AnimatorController\";\r\n\r\n/** 参数类型 */\r\nexport enum ParamType {\r\n    COMPLETE = 0,\r\n    BOOLEAN = 1,\r\n    NUMBER = 2,\r\n    TRIGGER = 3,\r\n    AUTO_TRIGGER = 4\r\n}\r\n\r\n/** 逻辑类型 */\r\nexport enum LogicType {\r\n    EQUAL = 0,\r\n    NOTEQUAL = 1,\r\n    GREATER = 2,\r\n    LESS = 3,\r\n    GREATER_EQUAL = 4,\r\n    LESS_EQUAL = 5\r\n}\r\n\r\n/**\r\n * 单项条件\r\n */\r\nexport default class AnimatorCondition {\r\n    private _ac: AnimatorController = null;\r\n    /** 此条件对应的参数名 */\r\n    private _param: string = \"\";\r\n    /** 此条件对应的值 */\r\n    private _value: number = 0;\r\n    /** 此条件与值比较的逻辑 */\r\n    private _logic: LogicType = LogicType.EQUAL;\r\n\r\n    constructor(data: any, ac: AnimatorController) {\r\n        this._ac = ac;\r\n        this._param = data.param;\r\n        this._value = data.value;\r\n        this._logic = data.logic;\r\n    }\r\n\r\n    public getParamName() {\r\n        return this._param;\r\n    }\r\n\r\n    public getParamType(): ParamType {\r\n        return this._ac.params.getParamType(this._param);\r\n    }\r\n\r\n    /** 判断此条件是否满足 */\r\n    public check(): boolean {\r\n        let type: ParamType = this.getParamType();\r\n        if (type === ParamType.BOOLEAN) {\r\n            return this._ac.params.getBool(this._param) === this._value;\r\n        } else if (type === ParamType.NUMBER) {\r\n            let value: number = this._ac.params.getNumber(this._param);\r\n            switch (this._logic) {\r\n                case LogicType.EQUAL:\r\n                    return value === this._value;\r\n                case LogicType.NOTEQUAL:\r\n                    return value !== this._value;\r\n                case LogicType.GREATER:\r\n                    return value > this._value;\r\n                case LogicType.LESS:\r\n                    return value < this._value;\r\n                case LogicType.GREATER_EQUAL:\r\n                    return value >= this._value;\r\n                case LogicType.LESS_EQUAL:\r\n                    return value <= this._value;\r\n                default:\r\n                    return false;\r\n            }\r\n        } else if (type === ParamType.AUTO_TRIGGER) {\r\n            return this._ac.params.getAutoTrigger(this._param) !== 0;\r\n        } else if (type === ParamType.TRIGGER) {\r\n            return this._ac.params.getTrigger(this._param) !== 0;\r\n        } else {\r\n            cc.error(`[AnimatorCondition.check] 错误的type: ${type}`);\r\n            return false;\r\n        }\r\n    }\r\n}\r\n"]}