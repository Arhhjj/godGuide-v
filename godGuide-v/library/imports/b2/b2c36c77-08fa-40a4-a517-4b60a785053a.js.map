{"version":3,"sources":["assets\\scripts\\showcase\\scenes\\Loading.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sDAAiD;AACjD,8CAAgD;AAChD,0DAAyE;AACzE,6CAAwC;AAElC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAqC,2BAAY;IAAjD;;IA4DA,CAAC;IA1DG,wBAAM,GAAN;QACI,kBAAQ,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAA;QAChC,wCAAwC;QAExC,IAAI,QAAQ,GAAG,yBAAc,CAAC,WAAW,EAAE,CAAA;QAC3C,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,QAAQ,CAAC,CAAA;QAE7C,IAAI,CAAC,QAAQ,EAAE,kBAAkB;YAC7B,yBAAc,CAAC,WAAW,EAAE,CAAA;aAC3B,2BAA2B;YAC5B,kBAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAA;IAC/C,CAAC;IAEK,uBAAK,GAAX;;;;4BACI,qBAAM,IAAI,CAAC,QAAQ,EAAE,EAAA;;wBAArB,SAAqB,CAAA;wBACrB,IAAI,CAAC,YAAY,EAAE,CAAA;;;;;KACtB;IAED,2BAAS,GAAT;QACI,eAAK,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAA;IACjC,CAAC;IAED,8BAAY,GAAZ;QACI,OAAO,IAAI,OAAO,CAAO,UAAC,OAAO,EAAE,MAAM;YACrC,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,UAAC,cAAc,EAAE,UAAU,EAAE,IAAI;gBAC9D,IAAM,QAAQ,GAAG,cAAc,GAAG,UAAU,CAAC;gBAC7C,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;YACpC,CAAC,EAAE,UAAC,KAAK;gBACL,IAAI,KAAK,EAAE;oBACP,OAAO,CAAC,KAAK,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;iBAC1C;qBAAM;oBACH,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;iBACjC;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAA;IACN,CAAC;IAEa,0BAAQ,GAAtB;;;;;;wBACI,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;wBAEhC,QAAQ,GAAG,EAAE,CAAC;wBAEpB,4BAA4B;wBAC5B,QAAQ,CAAC,IAAI,CAAC,aAAG,CAAC,OAAO,CAAC,YAAM,CAAC,OAAO,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;wBAC3D,QAAQ,CAAC,IAAI,CAAC,aAAG,CAAC,OAAO,CAAC,YAAM,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;wBACrD,QAAQ,CAAC,IAAI,CAAC,aAAG,CAAC,OAAO,CAAC,YAAM,CAAC,KAAK,EAAE,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;;;;wBAKnD,qBAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAA;;wBAA3B,SAA2B,CAAC;wBAC5B,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;;;;wBAE1B,OAAO,CAAC,KAAK,CAAC,aAAa,EAAE,OAAK,CAAC,CAAC;;;;;;KAE3C;IAzDgB,OAAO;QAD3B,OAAO;OACa,OAAO,CA4D3B;IAAD,cAAC;CA5DD,AA4DC,CA5DoC,EAAE,CAAC,SAAS,GA4DhD;kBA5DoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["import Layer from \"../../common/cmpt/base/Layer\";\nimport { DirUrl } from \"../../common/const/Url\";\nimport UserInfo, { UserInfoStorge } from \"../../common/runtime/UserInfo\";\nimport Res from \"../../common/util/Res\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Loading extends cc.Component {\n\n    onLoad() {\n        UserInfo.instance.initUserInfo()\n        // console.log = () => { } //置空log 不显示打印\n\n        let userInfo = UserInfoStorge.getUserInfo()\n        console.log(\">>> 本地的UserInfo___> \", userInfo)\n\n        if (!userInfo) //如果本地没有数据则储存数据在本地\n            UserInfoStorge.setUserInfo()\n        else //若本地已有数据则将UserInfo更新为已有的数据\n            UserInfo.instance.setUserInfo(userInfo)\n    }\n\n    async start() {\n        await this.initData()\n        this.preloadScene()\n    }\n\n    enterMain() {\n        Layer.inst.enterScene(\"Main\")\n    }\n\n    preloadScene() {\n        return new Promise<void>((reslove, reject) => {\n            cc.director.preloadScene('Main', (completedCount, totalCount, item) => {\n                const progress = completedCount / totalCount;\n                console.log('预加载进度：', progress);\n            }, (error) => {\n                if (error) {\n                    console.error('预加载Main场景资源失败：', error);\n                } else {\n                    console.log('预加载Main场景资源成功！');\n                }\n            });\n        })\n    }\n\n    private async initData() {\n        console.log(\">>> initData__> 开始加载资源\");\n\n        const promises = [];\n\n        // 添加各个资源加载函数返回的Promise对象到数组\n        promises.push(Res.loadDir(DirUrl.TEXTURE, cc.SpriteFrame));\n        promises.push(Res.loadDir(DirUrl.PREFAB, cc.Prefab));\n        promises.push(Res.loadDir(DirUrl.AUDIO, cc.AudioClip));\n        // promises.push(Res.loadDir(DirUrl.JSON, cc.JsonAsset));\n        // promises.push(Res.loadDir(DirUrl.ANIMATION, cc.AnimationClip));\n\n        try {\n            await Promise.all(promises);\n            console.log(\">>> 资源加载完成\");\n        } catch (error) {\n            console.error(\">>> 资源加载失败：\", error);\n        }\n    }\n\n\n}\n"]}