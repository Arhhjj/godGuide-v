{"version":3,"sources":["assets\\scripts\\common\\cmpt\\shader\\ShaderShining.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uCAAkC;AAE5B,IAAA,KAAmE,EAAE,CAAC,UAAU,EAA9E,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAA,EAAE,gBAAgB,sBAAA,EAAE,iBAAiB,uBAAkB,CAAC;AAMvF;IAA2C,iCAAY;IAAvD;QAAA,qEAkCC;QAhCU,WAAK,GAAW,CAAC,CAAC;QAElB,WAAK,GAAW,CAAC,CAAC;QAElB,SAAG,GAAW,IAAI,CAAC;QAEnB,cAAQ,GAAW,CAAC,CAAC;QAErB,cAAQ,GAAW,CAAC,CAAC;QAErB,eAAS,GAAY,KAAK,CAAC;QAE1B,UAAI,GAAgB,IAAI,CAAC;;IAoBrC,CAAC;IAnBG,sBAAW,8BAAG;aAAd;YACI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aACpE;YACD,OAAO,IAAI,CAAC,IAAI,CAAC;QACrB,CAAC;;;OAAA;IAES,6BAAK,GAAf;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAES,8BAAM,GAAhB;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAEM,oCAAY,GAAnB;QACI,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,aAAa,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QAClG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,eAAK,CAAC,YAAY,CAAC,CAAC,CAAC,eAAK,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IACnH,CAAC;IA/BD;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,CAAC;gDACf;IAEzB;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,CAAC;gDACf;IAEzB;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC;8CACnD;IAE1B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC;mDACjD;IAE5B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,eAAe,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC;mDAC1D;IAE5B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,sBAAsB,EAAE,CAAC;oDACtB;IAZjB,aAAa;QAJjC,OAAO;QACP,gBAAgB;QAChB,iBAAiB;QACjB,IAAI,CAAC,gCAAgC,CAAC;OAClB,aAAa,CAkCjC;IAAD,oBAAC;CAlCD,AAkCC,CAlC0C,EAAE,CAAC,SAAS,GAkCtD;kBAlCoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["import Timer from \"../base/Timer\";\r\n\r\nconst { ccclass, property, menu, disallowMultiple, executeInEditMode } = cc._decorator;\r\n\r\n@ccclass\r\n@disallowMultiple\r\n@executeInEditMode\r\n@menu(\"Framework/Shader/ShaderShining\")\r\nexport default class ShaderShining extends cc.Component {\r\n    @property({ tooltip: CC_DEV && \"流光速度\" })\r\n    public speed: number = 1;\r\n    @property({ tooltip: CC_DEV && \"流光斜率\" })\r\n    public slope: number = 1;\r\n    @property({ tooltip: CC_DEV && \"流光宽度\", range: [0, Number.MAX_SAFE_INTEGER] })\r\n    public len: number = 0.25;\r\n    @property({ tooltip: CC_DEV && \"流光强度\", range: [0, Number.MAX_SAFE_INTEGER] })\r\n    public strength: number = 2;\r\n    @property({ tooltip: CC_DEV && \"两次流光动画之间的间隔时间\", range: [0, Number.MAX_SAFE_INTEGER] })\r\n    public interval: number = 1;\r\n    @property({ tooltip: CC_DEV && \"流光速度是否受到timeScale的影响\" })\r\n    public timeScale: boolean = false;\r\n\r\n    private _mat: cc.Material = null;\r\n    public get mat(): cc.Material {\r\n        if (!this._mat) {\r\n            this._mat = this.getComponent(cc.RenderComponent).getMaterial(0);\r\n        }\r\n        return this._mat;\r\n    }\r\n\r\n    protected start(): void {\r\n        this.updateShader();\r\n    }\r\n\r\n    protected update(): void {\r\n        this.updateShader();\r\n    }\r\n\r\n    public updateShader(): void {\r\n        this.mat.setProperty(\"shiningData\", new cc.Vec4(this.speed, this.slope, this.len, this.interval));\r\n        this.mat.setProperty(\"extra\", new cc.Vec4(this.timeScale ? Timer.scaleGameSec : Timer.gameSec, this.strength));\r\n    }\r\n}\r\n"]}