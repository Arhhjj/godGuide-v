{"version":3,"sources":["assets\\scripts\\showcase\\dialog\\DlgTimer.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import DialogBase from \"../../common/cmpt/base/DialogBase\";\r\nimport Timer from \"../../common/cmpt/base/Timer\";\r\nimport { EventName } from \"../../common/const/EventName\";\r\nimport { DirUrl } from \"../../common/const/Url\";\r\nimport Events, { preloadEvent } from \"../../common/util/Events\";\r\nimport { SCALE_TWEEN, Tween } from \"../../common/util/Tween\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class DlgTimer extends DialogBase {\r\n    public static pUrl: string = DirUrl.PREFAB_DIALOG + \"DlgTimer\";\r\n\r\n    @property(cc.Slider) public slider: cc.Slider = null;\r\n    @property(cc.Node) move1: cc.Node = null;\r\n    @property(cc.Node) move2: cc.Node = null;\r\n    @property(cc.Node) move3: cc.Node = null;\r\n\r\n    private _dir = 1;\r\n    private _tween: Tween<any> = null;\r\n\r\n    protected onLoad() {\r\n        super.onLoad();\r\n        Events.targetOn(this);\r\n    }\r\n\r\n    protected onDestroy() {\r\n        this._tween?.stop();\r\n        Events.targetOff(this);\r\n    }\r\n\r\n    protected update() {\r\n        this.move2.x += Timer.scaleDt * 300 * this._dir;\r\n        if (this._dir > 0 && this.move2.x > 500) {\r\n            this._dir = -1;\r\n        } else if (this._dir < 0 && this.move2.x < -500) {\r\n            this._dir = 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    public onOpen() {\r\n        this.slider.progress = Timer.timeScale;\r\n        this.slider.node.getChildByName(\"lab\").getComponent(cc.Label).string = `timescale: ${Math.floor(this.slider.progress * 100) / 100}`;\r\n        this.eventTimeScale();\r\n\r\n        this._tween = new Tween(this.move3, SCALE_TWEEN)\r\n            .to({ x: [300, -300], y: [300, -300] }, 2000)\r\n            .repeat(1000)\r\n            .start();\r\n    }\r\n\r\n    private onSlide() {\r\n        this.slider.node.getChildByName(\"lab\").getComponent(cc.Label).string = `timescale: ${Math.floor(this.slider.progress * 100) / 100}`;\r\n        Timer.timeScale = this.slider.progress;\r\n    }\r\n\r\n    @preloadEvent(EventName.TIME_SCALE)\r\n    private eventTimeScale() {\r\n        this.move1.getComponent(cc.Animation).getAnimationState(\"move\").speed = Timer.timeScale;\r\n    }\r\n}\r\n"]}