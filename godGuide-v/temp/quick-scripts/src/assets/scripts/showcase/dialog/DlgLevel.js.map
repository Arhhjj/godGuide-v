{"version":3,"sources":["assets\\scripts\\showcase\\dialog\\DlgLevel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gEAA2D;AAC3D,sDAAiD;AACjD,8CAAwD;AACxD,8DAAyD;AACzD,0DAAqD;AACrD,mDAA8C;AAC9C,+CAA0C;AAEpC,IAAA,KAA8B,EAAE,CAAC,UAAU,EAAzC,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAkB,CAAC;AAGlD;IAAsC,4BAAU;IAAhD;QAAA,qEA0CC;QAvCsB,YAAM,GAAY,IAAI,CAAA;;IAuC7C,CAAC;IArCa,yBAAM,GAAhB;QACI,iBAAM,MAAM,WAAE,CAAC;QACf,gBAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC1B,CAAC;IAES,4BAAS,GAAnB;QACI,gBAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;IAES,yBAAM,GAAhB,cAAqB,CAAC;IAEtB;;OAEG;IACI,yBAAM,GAAb;QAAA,iBAKC;QAJG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;YACrC,cAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,UAAU,EAAE,YAAY,EAAE,KAAG,KAAO,EAAE,KAAI,CAAC,IAAI,CAAC,CAAA;YAC/E,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,kBAAQ,CAAC,QAAQ,CAAC,aAAa,IAAI,KAAK,CAAA;QAC/E,CAAC,CAAC,CAAA;IACN,CAAC;IAED,6BAAU,GAAV,UAAW,CAAC,EAAE,GAAG;QACb,GAAG,GAAG,CAAC,GAAG,CAAA;QAEV,IAAI,GAAG,IAAI,kBAAQ,CAAC,QAAQ,CAAC,aAAa,EAAE;YACxC,eAAK,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAA;YACzE,OAAM;SACT;QACD,oBAAU,CAAC,YAAY,GAAG,GAAG,GAAG,CAAC,CAAA;QACjC,eAAK,CAAC,IAAI,CAAC,SAAS,CAAC,YAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC7C,CAAC;IAEM,0BAAO,GAAd;QAAA,iBAIC;QAHG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;YACrC,cAAI,CAAC,sBAAsB,CAAC,IAAI,EAAE,UAAU,EAAE,YAAY,EAAE,KAAI,CAAC,IAAI,CAAC,CAAA;QAC1E,CAAC,CAAC,CAAA;IACN,CAAC;IAxCa,aAAI,GAAW,YAAM,CAAC,aAAa,GAAG,UAAU,CAAC;IAE5C;QAAlB,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CAAuB;IAHxB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA0C5B;IAAD,eAAC;CA1CD,AA0CC,CA1CqC,oBAAU,GA0C/C;kBA1CoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import DialogBase from \"../../common/cmpt/base/DialogBase\";\r\nimport Layer from \"../../common/cmpt/base/Layer\";\r\nimport { DirUrl, ResUrl } from \"../../common/const/Url\";\r\nimport GlobalInfo from \"../../common/runtime/GlobalInfo\";\r\nimport UserInfo from \"../../common/runtime/UserInfo\";\r\nimport Events from \"../../common/util/Events\";\r\nimport Tool from \"../../common/util/Tool\";\r\n\r\nconst { ccclass, property, menu } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class DlgLevel extends DialogBase {\r\n    public static pUrl: string = DirUrl.PREFAB_DIALOG + \"DlgLevel\";\r\n\r\n    @property(cc.Node) levels: cc.Node = null\r\n\r\n    protected onLoad() {\r\n        super.onLoad();\r\n        Events.targetOn(this);\r\n    }\r\n\r\n    protected onDestroy() {\r\n        Events.targetOff(this);\r\n    }\r\n\r\n    protected update() { }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    public onOpen() {\r\n        this.levels.children.forEach((item, index) => {\r\n            Tool.addParamButtonClick(item, `DlgLevel`, `clickEvent`, `${index}`, this.node)\r\n            item.getChildByName(\"遮挡\").active = UserInfo.instance.levelProgress <= index\r\n        })\r\n    }\r\n\r\n    clickEvent(e, arg) {\r\n        arg = +arg\r\n\r\n        if (arg >= UserInfo.instance.levelProgress) {\r\n            Layer.inst.showTip({ text: \"此关卡还未解锁\", unique: true, end: cc.v2(0, 100) })\r\n            return\r\n        }\r\n        GlobalInfo.LEVEL_SELECT = arg + 1\r\n        Layer.inst.enterMain(ResUrl.PREFAB.GAME);\r\n    }\r\n\r\n    public onClose() {\r\n        this.levels.children.forEach((item, index) => {\r\n            Tool.removeParamButtonClick(item, `DlgLevel`, `clickEvent`, this.node)\r\n        })\r\n    }\r\n}\r\n"]}