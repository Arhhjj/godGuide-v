{"version":3,"sources":["assets\\scripts\\showcase\\dialog\\DlgVirtualList2.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gEAA2D;AAC3D,2EAAsE;AACtE,8CAAgD;AAChD,+CAA0C;AAGpC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C,SAAS,YAAY,CAAC,IAAc;IAChC,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;AAChC,CAAC;AAGD;IAA6C,mCAAU;IAAvD;QAAA,qEAsCC;QAnC0B,UAAI,GAA0B,IAAI,CAAC;QACtC,YAAM,GAAa,IAAI,CAAC;QAEpC,UAAI,GAAW,CAAC,CAAC;QACjB,cAAQ,GAAa,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;;IA+BhD,CAAC;IA7BG;;OAEG;IACI,gCAAM,GAAb;QACI,sBAAsB;QACtB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;QAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;YACzB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,cAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;SAC1D;QAED,IAAI,CAAC,IAAI,GAAG,cAAI,CAAC,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACtD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,0EAAiB,IAAI,CAAC,IAAM,CAAC;IACtD,CAAC;IAEO,oCAAU,GAAlB;QACI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,cAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;IAC3D,CAAC;IAEO,uCAAa,GAArB;QACI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3B,CAAC;IAEO,uCAAa,GAArB;QACI,6BAA6B;QAC7B,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAC3E,IAAI,CAAC,IAAI,GAAG,cAAI,CAAC,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACtD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,0EAAiB,IAAI,CAAC,IAAM,CAAC;IACtD,CAAC;IApCa,oBAAI,GAAW,YAAM,CAAC,aAAa,GAAG,iBAAiB,CAAC;IAE/C;QAAtB,QAAQ,CAAC,qBAAW,CAAC;iDAAoC;IACtC;QAAnB,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDAAyB;IAJ3B,eAAe;QADnC,OAAO;OACa,eAAe,CAsCnC;IAAD,sBAAC;CAtCD,AAsCC,CAtC4C,oBAAU,GAsCtD;kBAtCoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["import DialogBase from \"../../common/cmpt/base/DialogBase\";\r\nimport VirtualList from \"../../common/cmpt/ui/scrollList/VirtualList\";\r\nimport { DirUrl } from \"../../common/const/Url\";\r\nimport Tool from \"../../common/util/Tool\";\r\nimport { ItemArgs } from \"./ListItem\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nfunction calcItemSize(args: ItemArgs): cc.Size {\r\n    return cc.size(0, args.num);\r\n}\r\n\r\n@ccclass\r\nexport default class DlgVirtualList2 extends DialogBase {\r\n    public static pUrl: string = DirUrl.PREFAB_DIALOG + \"DlgVirtualList2\";\r\n\r\n    @property(VirtualList) list: VirtualList<ItemArgs> = null;\r\n    @property(cc.Label) rndLab: cc.Label = null;\r\n\r\n    private _rnd: number = 0;\r\n    private _heights: number[] = [80, 100, 180];\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    public onOpen() {\r\n        // 元素大小不一致时提供计算元素大小的接口\r\n        this.list.setCalcItemSize(calcItemSize);\r\n\r\n        for (let i = 0; i < 50; i++) {\r\n            this.list.push({ num: Tool.arrayRand(this._heights) });\r\n        }\r\n\r\n        this._rnd = Tool.randInt(0, this.list.argsArr.length);\r\n        this.rndLab.string = `-> 下一次滚动到的下标为：${this._rnd}`;\r\n    }\r\n\r\n    private onClickAdd() {\r\n        this.list.push({ num: Tool.arrayRand(this._heights) });\r\n    }\r\n\r\n    private onClickDelete() {\r\n        this.list.splice(0, 1);\r\n    }\r\n\r\n    private onClickScroll() {\r\n        // 滚动到对应下标的item的左上角对齐view的左上角\r\n        this.list.scrollItemToView(this._rnd, cc.v2(0, 1), cc.v2(0, 1), 0.5, true);\r\n        this._rnd = Tool.randInt(0, this.list.argsArr.length);\r\n        this.rndLab.string = `-> 下一次滚动到的下标为：${this._rnd}`;\r\n    }\r\n}\r\n"]}