{"version":3,"sources":["assets\\scripts\\common\\cmpt\\ui\\ShakeNode.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,0CAAsD;AAEhD,IAAA,KAAgD,EAAE,CAAC,UAAU,EAA3D,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAA,EAAE,gBAAgB,sBAAkB,CAAC;AAEpE;;GAEG;AAIH;IAAuC,6BAAY;IAAnD;QAAA,qEAsCC;QApCU,gBAAU,GAAW,CAAC,CAAC;QAGvB,eAAS,GAAW,IAAI,CAAC;QAKzB,eAAS,GAAY,KAAK,CAAC;QAE1B,YAAM,GAAmB,IAAI,CAAC;;IA0B1C,CAAC;IAxBG;;;OAGG;IACI,yBAAK,GAAZ,UAAa,KAAiB;QAAjB,sBAAA,EAAA,SAAiB;QAC1B,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;YACvG,OAAO;SACV;QAED,IAAI,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QAC1B,IAAI,IAAI,GAAa,EAAE,CAAC;QACxB,IAAI,IAAI,GAAa,EAAE,CAAC;QACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YACzB,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACf,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAClB;QAED,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,aAAK,CAAC,IAAI,CAAC,IAAI,EAAE,mBAAW,CAAC,CAAC,CAAC,CAAC,IAAI,aAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxF,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;aACtD,MAAM,CAAC,KAAK,CAAC;aACb,KAAK,EAAE,CAAC;IACjB,CAAC;IAnCD;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,CAAC;iDACV;IAG9B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,WAAW,EAAE,CAAC;gDACb;IAKhC;QAHC,QAAQ,CAAC;YACN,OAAO,EAAE,MAAM,IAAI,sBAAsB;SAC5C,CAAC;gDACgC;IAVjB,SAAS;QAH7B,OAAO;QACP,gBAAgB;QAChB,IAAI,CAAC,0BAA0B,CAAC;OACZ,SAAS,CAsC7B;IAAD,gBAAC;CAtCD,AAsCC,CAtCsC,EAAE,CAAC,SAAS,GAsClD;kBAtCoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import { SCALE_TWEEN, Tween } from \"../../util/Tween\";\r\n\r\nconst { ccclass, property, menu, disallowMultiple } = cc._decorator;\r\n\r\n/**\r\n * 节点振动\r\n */\r\n@ccclass\r\n@disallowMultiple\r\n@menu(\"Framework/UI组件/ShakeNode\")\r\nexport default class ShakeNode extends cc.Component {\r\n    @property({ tooltip: CC_DEV && \"振动幅度\" })\r\n    public shakePower: number = 5;\r\n\r\n    @property({ tooltip: CC_DEV && \"振动周期，单位：秒\" })\r\n    public shakeTime: number = 0.16;\r\n\r\n    @property({\r\n        tooltip: CC_DEV && \"变化速度是否受到timeScale的影响\"\r\n    })\r\n    public timeScale: boolean = false;\r\n\r\n    private _tween: Tween<cc.Node> = null;\r\n\r\n    /**\r\n     * 振动\r\n     * @param times 振动几个周期\r\n     */\r\n    public shake(times: number = 5) {\r\n        if ((this._tween && this._tween.isPlaying()) || times <= 0 || this.shakePower <= 0 || this.shakeTime <= 0) {\r\n            return;\r\n        }\r\n\r\n        let sv = cc.v2(0, this.shakePower);\r\n        this.node.setPosition(sv);\r\n        let xArr: number[] = [];\r\n        let yArr: number[] = [];\r\n        for (let i = 1; i <= 8; i++) {\r\n            let v = sv.rotate(Math.PI / 4 * (i * 3));\r\n            xArr.push(v.x);\r\n            yArr.push(v.y);\r\n        }\r\n\r\n        this._tween = this.timeScale ? new Tween(this.node, SCALE_TWEEN) : new Tween(this.node);\r\n        this._tween.to({ x: xArr, y: yArr }, this.shakeTime * 1000)\r\n            .repeat(times)\r\n            .start();\r\n    }\r\n}\r\n"]}